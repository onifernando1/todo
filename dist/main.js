(()=>{"use strict";const e=e=>{const t=document.getElementById("content"),n=document.createElement("div");t.appendChild(n),((e,t)=>{const n=document.createElement("div");n.innerHTML=e.title,n.className="todo-title",t.appendChild(n)})(e,n),((e,t)=>{const n=document.createElement("div");n.innerHTML=e.description,n.className="todo-description",t.appendChild(n)})(e,n),((e,t)=>{const n=document.createElement("div");n.innerHTML=e.dueDate,n.className="todo-duedate",t.appendChild(n)})(e,n),((e,t)=>{const n=document.createElement("div");n.innerHTML=e.priority,n.className="todo-priority",t.appendChild(n)})(e,n)},t=e=>{const t=document.createElement("div");console.log(t),(()=>{const e=document.getElementById("projects-container");if(null!=e)for(;e.firstChild;)e.removeChild(e.lastChild)})(),(()=>{const e=document.getElementById("projects-container"),t=document.createElement("div");t.id="inner-projects-container",e.appendChild(t)})(),(e=>{e.forEach((e=>{const t=document.getElementById("inner-projects-container"),n=document.createElement("div");n.className="individual-project-container";const o=document.createElement("div");o.className="project-title",o.innerText=e.title;const c=document.createElement("button");c.className=`view-project-${e.id}`,c.textContent="View project",n.appendChild(c),n.appendChild(o),t.appendChild(n)}))})(e)},n=function(e){!function(){const e=document.getElementById("content");for(;e.firstChild;)e.removeChild(e.lastChild)}();const t=document.createElement("div");t.className="view-project-container",content.appendChild(t);const n=document.createElement("div");n.className="view-project-title",n.innerText=e.title,t.appendChild(n)},o=function(){const e=document.getElementById("content"),t=document.createElement("div");t.id="projects-container",e.appendChild(t)},c=function(){const e=document.getElementById("content"),t=document.createElement("div");t.className="new-project-form-container",e.appendChild(t);const n=document.createElement("form");n.id="new-project-form";const o=document.createElement("input");o.type="text",o.id="title",o.name="title";const c=document.createElement("label");c.htmlFor="title",c.innerText="New Project Title";const d=document.createElement("input");d.type="submit",d.id="submit",d.name="submit",n.appendChild(c),n.appendChild(o),n.appendChild(d),t.appendChild(n)},d={newToDoForm:function(){const e=document.getElementsByClassName("view-project-container")[0],t=document.createElement("div");t.className="new-todo-form-container",e.appendChild(t);const n=document.createElement("form");n.id="new-todo-form";const o=document.createElement("label");o.htmlFor="title",o.innerText="Title";const c=document.createElement("input");c.type="text",c.id="title",c.name="title";const d=document.createElement("label");d.htmlFor="description",d.innerText="Description";const i=document.createElement("input");i.type="text",i.id="description",i.name="description";const l=document.createElement("label");l.htmlFor="dueDate",l.innerText="Due Date";const r=document.createElement("input");r.type="text",r.id="dueDate",r.name="dueDate";const a=document.createElement("label");a.htmlFor="priority",a.innerText="Priority";const m=document.createElement("input");m.type="text",m.id="priority",m.name="priority";const s=document.createElement("input");s.type="submit",s.id="submit",s.name="submit",n.appendChild(o),n.appendChild(c),n.appendChild(d),n.appendChild(i),n.appendChild(l),n.appendChild(r),n.appendChild(a),n.appendChild(m),n.appendChild(s),t.appendChild(n)},assignProjectId:function(e){const t=document.getElementById("new-todo-form"),n=document.createElement("input");n.type="hidden",n.id="projectId",n.name="projectId",n.value=e,t.appendChild(n)},showAllTodos:function(e){console.log("called"),function(){const e=document.getElementsByClassName("todo-container")[0],t=document.getElementById("content");e&&t.removeChild(e)}(),function(){const e=document.getElementById("content"),t=document.createElement("div");t.className="todo-container",e.appendChild(t)}(),function(e){const t=document.getElementsByClassName("todo-container")[0];e.forEach((e=>{((e,t)=>{const n=document.createElement("div");n.innerHTML=e.title,n.className="todo-title",t.appendChild(n)})(e,t),((e,t)=>{const n=document.createElement("div");n.innerHTML=e.description,n.className="todo-description",t.appendChild(n)})(e,t),((e,t)=>{const n=document.createElement("div");n.innerHTML=e.dueDate,n.className="todo-duedate",t.appendChild(n)})(e,t),((e,t)=>{const n=document.createElement("div");n.innerHTML=e.priority,n.className="todo-priority",t.appendChild(n)})(e,t)}))}(e)}},i=function(e){n(e)},l=function(e){let t=e.toDoArray;console.log("vtd outer called"),console.log(t),null!=t&&(d.showAllTodos(t),console.log("tododom called"))},r=(()=>{const e=[];return{showAllProjects:()=>{t(e),r.viewProjectListener()},projectArray:e,projectId:0,toDoId:0,viewProjectListener:function(){e.forEach((e=>{document.getElementsByClassName(`view-project-${e.id}`)[0].addEventListener("click",(()=>{i(e),d.newToDoForm(),d.assignProjectId(e.id),a().todoListener(),e.showToDos(),l(e)}))}))}}})(),a=function(e,t,n,o){const c="incomplete";let d=0;return d+=1,{title:e,description:t,dueDate:n,priority:o,toDoStatus:c,create:(e,t,n,o)=>{newToDo=toDo(e,t,n,o)},change:(e,t)=>{this[e]=t},toDoStatus:c,toDoid:1,projectId:"",todoListener:function(){document.getElementById("new-todo-form").addEventListener("submit",(e=>{e.preventDefault(),function(){const e=document.getElementById("title").value,t=document.getElementById("description").value,n=document.getElementById("dueDate").value,o=document.getElementById("priority").value,c=document.getElementById("projectId").value,d=a(e,t,n,o);d.projectId=c,d.id=1;let i=function(e){let t="";return r.projectArray.forEach((n=>{n.id==e&&(t=n)})),t}(c);i.toDoArray.push(d),console.log(i),l(i)}()}))}}},m=t=>{const n=[];return r.projectId+=1,{title:t,toDoArray:n,showToDos:()=>{n.forEach((t=>{e(t)}))},createFormListener:function(){document.getElementById("new-project-form").addEventListener("submit",(e=>{e.preventDefault(),function(){const e=document.getElementById("title").value,t=m(e);t.id=r.projectId,r.projectArray.push(t),r.showAllProjects()}()}))},id:""}},s=m("ABC"),p=a("abc","abc","abc","abc");o(),c(),s.toDoArray.push(p),s.showToDos(),r.showAllProjects(),s.createFormListener()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L0MsR0FrQ21ELEVDbEMxREcsRUFBVXVFLEVBQVEsT0FDbEIsRUFBT3BCLEVBQUssTUFBTyxNQUFPLE1BQU8sT0FDdkNyRixJQUNBQSxJQUNBa0MsRUFBUTRDLFVBQVV5QixLQUFLLEdBQ3ZCckUsRUFBUXFELFlBQ1JQLEVBQWVDLGtCQUNmL0MsRUFBUXdFLG9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9kb20uanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy90b0RvRG9tLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvdmlldy5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3Byb2plY3RNYW5hZ2VyLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvdG9kby5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3Byb2plY3QuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBEb21TdHVmZiA9ICgoKSA9PiB7XG4gIGNvbnN0IF9kaXNwbGF5VGl0bGUgPSAodG9EbywgbmV3VG9Eb0RpdikgPT4ge1xuICAgIGNvbnN0IG5ld1RvRG9UaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbmV3VG9Eb1RpdGxlLmlubmVySFRNTCA9IHRvRG8udGl0bGU7XG4gICAgbmV3VG9Eb1RpdGxlLmNsYXNzTmFtZSA9IFwidG9kby10aXRsZVwiO1xuICAgIG5ld1RvRG9EaXYuYXBwZW5kQ2hpbGQobmV3VG9Eb1RpdGxlKTtcbiAgfTtcblxuICBjb25zdCBfZGlzcGxheURlc2NyaXB0aW9uID0gKHRvRG8sIG5ld1RvRG9EaXYpID0+IHtcbiAgICBjb25zdCBuZXdUb0RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG5ld1RvRG9EZXNjcmlwdGlvbi5pbm5lckhUTUwgPSB0b0RvLmRlc2NyaXB0aW9uO1xuICAgIG5ld1RvRG9EZXNjcmlwdGlvbi5jbGFzc05hbWUgPSBcInRvZG8tZGVzY3JpcHRpb25cIjtcbiAgICBuZXdUb0RvRGl2LmFwcGVuZENoaWxkKG5ld1RvRG9EZXNjcmlwdGlvbik7XG4gIH07XG5cbiAgY29uc3QgX2Rpc3BsYXlEdWVEYXRlID0gKHRvRG8sIG5ld1RvRG9EaXYpID0+IHtcbiAgICBjb25zdCBuZXdUb0RvRHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbmV3VG9Eb0R1ZURhdGUuaW5uZXJIVE1MID0gdG9Eby5kdWVEYXRlO1xuICAgIG5ld1RvRG9EdWVEYXRlLmNsYXNzTmFtZSA9IFwidG9kby1kdWVkYXRlXCI7XG4gICAgbmV3VG9Eb0Rpdi5hcHBlbmRDaGlsZChuZXdUb0RvRHVlRGF0ZSk7XG4gIH07XG5cbiAgY29uc3QgX2Rpc3BsYXlQcmlvcml0eSA9ICh0b0RvLCBuZXdUb0RvRGl2KSA9PiB7XG4gICAgY29uc3QgbmV3VG9Eb1ByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBuZXdUb0RvUHJpb3JpdHkuaW5uZXJIVE1MID0gdG9Eby5wcmlvcml0eTtcbiAgICBuZXdUb0RvUHJpb3JpdHkuY2xhc3NOYW1lID0gXCJ0b2RvLXByaW9yaXR5XCI7XG4gICAgbmV3VG9Eb0Rpdi5hcHBlbmRDaGlsZChuZXdUb0RvUHJpb3JpdHkpO1xuICB9O1xuXG4gIGNvbnN0IF9kaXNwbGF5SW5kaXZpZHVhbFByb2plY3QgPSAocHJvamVjdEFycmF5KSA9PiB7XG4gICAgcHJvamVjdEFycmF5LmZvckVhY2goKHByb2plY3QpID0+IHtcbiAgICAgIGNvbnN0IGlubmVyUHJvamVjdHNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgICAgXCJpbm5lci1wcm9qZWN0cy1jb250YWluZXJcIlxuICAgICAgKTtcbiAgICAgIGNvbnN0IG5ld1Byb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgbmV3UHJvamVjdENvbnRhaW5lci5jbGFzc05hbWUgPSBcImluZGl2aWR1YWwtcHJvamVjdC1jb250YWluZXJcIjtcbiAgICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBwcm9qZWN0VGl0bGUuY2xhc3NOYW1lID0gXCJwcm9qZWN0LXRpdGxlXCI7XG4gICAgICBwcm9qZWN0VGl0bGUuaW5uZXJUZXh0ID0gcHJvamVjdC50aXRsZTtcblxuICAgICAgLy8gYWRkIHZpZXcgcHJvamVjdCBidXR0b25cbiAgICAgIGNvbnN0IHZpZXdQcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgIHZpZXdQcm9qZWN0LmNsYXNzTmFtZSA9IGB2aWV3LXByb2plY3QtJHtwcm9qZWN0LmlkfWA7XG4gICAgICB2aWV3UHJvamVjdC50ZXh0Q29udGVudCA9IFwiVmlldyBwcm9qZWN0XCI7XG4gICAgICBuZXdQcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHZpZXdQcm9qZWN0KTtcbiAgICAgIG5ld1Byb2plY3RDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdFRpdGxlKTtcbiAgICAgIGlubmVyUHJvamVjdHNDb250YWluZXIuYXBwZW5kQ2hpbGQobmV3UHJvamVjdENvbnRhaW5lcik7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgX3JlbW92ZUFsbFByb2plY3RzID0gKCkgPT4ge1xuICAgIGNvbnN0IHByb2plY3RzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0cy1jb250YWluZXJcIik7XG4gICAgaWYgKHByb2plY3RzQ29udGFpbmVyICE9IG51bGwpIHtcbiAgICAgIHdoaWxlIChwcm9qZWN0c0NvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICAgIHByb2plY3RzQ29udGFpbmVyLnJlbW92ZUNoaWxkKHByb2plY3RzQ29udGFpbmVyLmxhc3RDaGlsZCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IF9jcmVhdGVQcm9qZWN0Q29udGFpbmVyID0gKCkgPT4ge1xuICAgIC8vIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRlbnRcIik7XG4gICAgY29uc3QgcHJvamVjdHNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3RzLWNvbnRhaW5lclwiKTtcbiAgICBjb25zdCBjcmVhdGVQcm9qZWN0c0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY3JlYXRlUHJvamVjdHNEaXYuaWQgPSBcImlubmVyLXByb2plY3RzLWNvbnRhaW5lclwiO1xuICAgIHByb2plY3RzQ29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZVByb2plY3RzRGl2KTtcbiAgICAvLyBjb250ZW50LmFwcGVuZENoaWxkKHByb2plY3RzQ29udGFpbmVyKTtcbiAgfTtcblxuICBjb25zdCBfcmVtb3ZlQWxsQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250ZW50XCIpO1xuICAgIHdoaWxlIChjb250ZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgIGNvbnRlbnQucmVtb3ZlQ2hpbGQoY29udGVudC5sYXN0Q2hpbGQpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBjcmVhdGVQcm9qZWN0c0NvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250ZW50XCIpO1xuICAgIGNvbnN0IHByb2plY3RzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBwcm9qZWN0c0NvbnRhaW5lci5pZCA9IFwicHJvamVjdHMtY29udGFpbmVyXCI7XG4gICAgY29udGVudC5hcHBlbmRDaGlsZChwcm9qZWN0c0NvbnRhaW5lcik7XG4gIH07XG5cbiAgY29uc3QgZGlzcGxheUFsbFByb2plY3RzID0gKHByb2plY3RBcnJheSkgPT4ge1xuICAgIGNvbnN0IHByb2plY3RzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb25zb2xlLmxvZyhwcm9qZWN0c0NvbnRhaW5lcik7XG4gICAgX3JlbW92ZUFsbFByb2plY3RzKCk7XG4gICAgX2NyZWF0ZVByb2plY3RDb250YWluZXIoKTtcbiAgICBfZGlzcGxheUluZGl2aWR1YWxQcm9qZWN0KHByb2plY3RBcnJheSk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlUHJvamVjdEZvcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgLy9jcmVhdGUgZm9ybSAgY29udGFpbmVyXG4gICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGVudFwiKTtcbiAgICBjb25zdCBuZXdQcm9qZWN0Rm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbmV3UHJvamVjdEZvcm1Db250YWluZXIuY2xhc3NOYW1lID0gXCJuZXctcHJvamVjdC1mb3JtLWNvbnRhaW5lclwiO1xuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQobmV3UHJvamVjdEZvcm1Db250YWluZXIpO1xuXG4gICAgLy9jcmVhdGUgZm9ybSBhbmQgaWRcbiAgICBjb25zdCBwcm9qZWN0Rm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpO1xuICAgIHByb2plY3RGb3JtLmlkID0gXCJuZXctcHJvamVjdC1mb3JtXCI7XG4gICAgY29uc3QgcHJvamVjdFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIHByb2plY3RUaXRsZS50eXBlID0gXCJ0ZXh0XCI7XG4gICAgcHJvamVjdFRpdGxlLmlkID0gXCJ0aXRsZVwiO1xuICAgIHByb2plY3RUaXRsZS5uYW1lID0gXCJ0aXRsZVwiO1xuXG4gICAgY29uc3QgcHJvamVjdFRpdGxlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgcHJvamVjdFRpdGxlTGFiZWwuaHRtbEZvciA9IFwidGl0bGVcIjtcbiAgICBwcm9qZWN0VGl0bGVMYWJlbC5pbm5lclRleHQgPSBcIk5ldyBQcm9qZWN0IFRpdGxlXCI7XG5cbiAgICBjb25zdCBzdWJtaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgc3VibWl0LnR5cGUgPSBcInN1Ym1pdFwiO1xuICAgIHN1Ym1pdC5pZCA9IFwic3VibWl0XCI7XG4gICAgc3VibWl0Lm5hbWUgPSBcInN1Ym1pdFwiO1xuICAgIC8vIHN1Ym1pdC5pbm5lclRleHQgPSBcIkNyZWF0ZSBQcm9qZWN0XCI7XG5cbiAgICBwcm9qZWN0Rm9ybS5hcHBlbmRDaGlsZChwcm9qZWN0VGl0bGVMYWJlbCk7XG4gICAgcHJvamVjdEZvcm0uYXBwZW5kQ2hpbGQocHJvamVjdFRpdGxlKTtcbiAgICBwcm9qZWN0Rm9ybS5hcHBlbmRDaGlsZChzdWJtaXQpO1xuXG4gICAgbmV3UHJvamVjdEZvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdEZvcm0pO1xuICB9O1xuXG4gIGNvbnN0IGRpc3BsYXl0b0RvID0gKHRvRG8pID0+IHtcbiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250ZW50XCIpO1xuICAgIGNvbnN0IG5ld1RvRG9EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgY29udGVudC5hcHBlbmRDaGlsZChuZXdUb0RvRGl2KTtcblxuICAgIF9kaXNwbGF5VGl0bGUodG9EbywgbmV3VG9Eb0Rpdik7XG5cbiAgICBfZGlzcGxheURlc2NyaXB0aW9uKHRvRG8sIG5ld1RvRG9EaXYpO1xuXG4gICAgX2Rpc3BsYXlEdWVEYXRlKHRvRG8sIG5ld1RvRG9EaXYpO1xuXG4gICAgX2Rpc3BsYXlQcmlvcml0eSh0b0RvLCBuZXdUb0RvRGl2KTtcbiAgfTtcblxuICBjb25zdCB2aWV3UHJvamVjdCA9IGZ1bmN0aW9uIChwcm9qZWN0KSB7XG4gICAgX3JlbW92ZUFsbENvbnRlbnQoKTtcblxuICAgIC8vIGdlbmVyYXRlIHZpZXdwcm9qZWN0Y29udGFpbmVyXG4gICAgY29uc3Qgdmlld1Byb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHZpZXdQcm9qZWN0Q29udGFpbmVyLmNsYXNzTmFtZSA9IFwidmlldy1wcm9qZWN0LWNvbnRhaW5lclwiO1xuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQodmlld1Byb2plY3RDb250YWluZXIpO1xuXG4gICAgLy8gYWRkIHByb2plY3QgdGl0bGVcblxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0aXRsZS5jbGFzc05hbWUgPSBcInZpZXctcHJvamVjdC10aXRsZVwiO1xuICAgIHRpdGxlLmlubmVyVGV4dCA9IHByb2plY3QudGl0bGU7XG4gICAgdmlld1Byb2plY3RDb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZGlzcGxheXRvRG8sXG4gICAgZGlzcGxheUFsbFByb2plY3RzLFxuICAgIHZpZXdQcm9qZWN0LFxuICAgIGNyZWF0ZVByb2plY3RzQ29udGFpbmVyLFxuICAgIGNyZWF0ZVByb2plY3RGb3JtLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IHsgRG9tU3R1ZmYgfTtcbiIsImNvbnN0IFRvRG9Eb20gPSAoKCkgPT4ge1xuICBjb25zdCBuZXdUb0RvRm9ybSA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxuICAgICAgXCJ2aWV3LXByb2plY3QtY29udGFpbmVyXCJcbiAgICApWzBdO1xuXG4gICAgY29uc3QgbmV3VG9kb0Zvcm1Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG5ld1RvZG9Gb3JtQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwibmV3LXRvZG8tZm9ybS1jb250YWluZXJcIjtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobmV3VG9kb0Zvcm1Db250YWluZXIpO1xuXG4gICAgLy8gLy9jcmVhdGUgZm9ybSBhbmQgaWRcblxuICAgIGNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XG4gICAgdG9kb0Zvcm0uaWQgPSBcIm5ldy10b2RvLWZvcm1cIjtcblxuICAgIGNvbnN0IHRvZG9UaXRsZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIHRvZG9UaXRsZUxhYmVsLmh0bWxGb3IgPSBcInRpdGxlXCI7XG4gICAgdG9kb1RpdGxlTGFiZWwuaW5uZXJUZXh0ID0gXCJUaXRsZVwiO1xuXG4gICAgY29uc3QgdG9kb1RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIHRvZG9UaXRsZS50eXBlID0gXCJ0ZXh0XCI7XG4gICAgdG9kb1RpdGxlLmlkID0gXCJ0aXRsZVwiO1xuICAgIHRvZG9UaXRsZS5uYW1lID0gXCJ0aXRsZVwiO1xuXG4gICAgY29uc3QgdG9kb0Rlc2NyaXB0aW9uTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgdG9kb0Rlc2NyaXB0aW9uTGFiZWwuaHRtbEZvciA9IFwiZGVzY3JpcHRpb25cIjtcbiAgICB0b2RvRGVzY3JpcHRpb25MYWJlbC5pbm5lclRleHQgPSBcIkRlc2NyaXB0aW9uXCI7XG5cbiAgICBjb25zdCB0b2RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgdG9kb0Rlc2NyaXB0aW9uLnR5cGUgPSBcInRleHRcIjtcbiAgICB0b2RvRGVzY3JpcHRpb24uaWQgPSBcImRlc2NyaXB0aW9uXCI7XG4gICAgdG9kb0Rlc2NyaXB0aW9uLm5hbWUgPSBcImRlc2NyaXB0aW9uXCI7XG5cbiAgICBjb25zdCB0b2RvRHVlRGF0ZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIHRvZG9EdWVEYXRlTGFiZWwuaHRtbEZvciA9IFwiZHVlRGF0ZVwiO1xuICAgIHRvZG9EdWVEYXRlTGFiZWwuaW5uZXJUZXh0ID0gXCJEdWUgRGF0ZVwiO1xuXG4gICAgY29uc3QgdG9kb0R1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgdG9kb0R1ZURhdGUudHlwZSA9IFwidGV4dFwiO1xuICAgIHRvZG9EdWVEYXRlLmlkID0gXCJkdWVEYXRlXCI7XG4gICAgdG9kb0R1ZURhdGUubmFtZSA9IFwiZHVlRGF0ZVwiO1xuXG4gICAgY29uc3QgdG9kb1ByaW9yaXR5TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgdG9kb1ByaW9yaXR5TGFiZWwuaHRtbEZvciA9IFwicHJpb3JpdHlcIjtcbiAgICB0b2RvUHJpb3JpdHlMYWJlbC5pbm5lclRleHQgPSBcIlByaW9yaXR5XCI7XG5cbiAgICBjb25zdCB0b2RvUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgdG9kb1ByaW9yaXR5LnR5cGUgPSBcInRleHRcIjtcbiAgICB0b2RvUHJpb3JpdHkuaWQgPSBcInByaW9yaXR5XCI7XG4gICAgdG9kb1ByaW9yaXR5Lm5hbWUgPSBcInByaW9yaXR5XCI7XG5cbiAgICBjb25zdCBzdWJtaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgc3VibWl0LnR5cGUgPSBcInN1Ym1pdFwiO1xuICAgIHN1Ym1pdC5pZCA9IFwic3VibWl0XCI7XG4gICAgc3VibWl0Lm5hbWUgPSBcInN1Ym1pdFwiO1xuXG4gICAgdG9kb0Zvcm0uYXBwZW5kQ2hpbGQodG9kb1RpdGxlTGFiZWwpO1xuICAgIHRvZG9Gb3JtLmFwcGVuZENoaWxkKHRvZG9UaXRsZSk7XG5cbiAgICB0b2RvRm9ybS5hcHBlbmRDaGlsZCh0b2RvRGVzY3JpcHRpb25MYWJlbCk7XG4gICAgdG9kb0Zvcm0uYXBwZW5kQ2hpbGQodG9kb0Rlc2NyaXB0aW9uKTtcblxuICAgIHRvZG9Gb3JtLmFwcGVuZENoaWxkKHRvZG9EdWVEYXRlTGFiZWwpO1xuICAgIHRvZG9Gb3JtLmFwcGVuZENoaWxkKHRvZG9EdWVEYXRlKTtcblxuICAgIHRvZG9Gb3JtLmFwcGVuZENoaWxkKHRvZG9Qcmlvcml0eUxhYmVsKTtcbiAgICB0b2RvRm9ybS5hcHBlbmRDaGlsZCh0b2RvUHJpb3JpdHkpO1xuXG4gICAgdG9kb0Zvcm0uYXBwZW5kQ2hpbGQoc3VibWl0KTtcblxuICAgIG5ld1RvZG9Gb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKHRvZG9Gb3JtKTtcbiAgfTtcblxuICBjb25zdCBfY3JlYXRlVG9kb0NvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250ZW50XCIpO1xuICAgIGNvbnN0IHRvZG9Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRvZG9Db250YWluZXIuY2xhc3NOYW1lID0gXCJ0b2RvLWNvbnRhaW5lclwiO1xuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQodG9kb0NvbnRhaW5lcik7XG4gIH07XG5cbiAgY29uc3QgX2RlbGV0ZVRvZG9Db250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgdG9kb0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ0b2RvLWNvbnRhaW5lclwiKVswXTtcbiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250ZW50XCIpO1xuICAgIGlmICh0b2RvQ29udGFpbmVyKSB7XG4gICAgICBjb250ZW50LnJlbW92ZUNoaWxkKHRvZG9Db250YWluZXIpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBfc2hvd1RvZG9zID0gZnVuY3Rpb24gKHRvZG9BcnJheSkge1xuICAgIGNvbnN0IHRvZG9Db250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidG9kby1jb250YWluZXJcIilbMF07XG5cbiAgICB0b2RvQXJyYXkuZm9yRWFjaCgodG9kbykgPT4ge1xuICAgICAgX2Rpc3BsYXlUaXRsZSh0b2RvLCB0b2RvQ29udGFpbmVyKTtcblxuICAgICAgX2Rpc3BsYXlEZXNjcmlwdGlvbih0b2RvLCB0b2RvQ29udGFpbmVyKTtcblxuICAgICAgX2Rpc3BsYXlEdWVEYXRlKHRvZG8sIHRvZG9Db250YWluZXIpO1xuXG4gICAgICBfZGlzcGxheVByaW9yaXR5KHRvZG8sIHRvZG9Db250YWluZXIpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHNob3dBbGxUb2RvcyA9IGZ1bmN0aW9uICh0b2RvQXJyYXkpIHtcbiAgICBjb25zb2xlLmxvZyhcImNhbGxlZFwiKTtcbiAgICBfZGVsZXRlVG9kb0NvbnRhaW5lcigpO1xuICAgIF9jcmVhdGVUb2RvQ29udGFpbmVyKCk7XG4gICAgX3Nob3dUb2Rvcyh0b2RvQXJyYXkpO1xuICB9O1xuXG4gIGNvbnN0IF9kaXNwbGF5VGl0bGUgPSAodG9EbywgbmV3VG9Eb0RpdikgPT4ge1xuICAgIGNvbnN0IG5ld1RvRG9UaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbmV3VG9Eb1RpdGxlLmlubmVySFRNTCA9IHRvRG8udGl0bGU7XG4gICAgbmV3VG9Eb1RpdGxlLmNsYXNzTmFtZSA9IFwidG9kby10aXRsZVwiO1xuICAgIG5ld1RvRG9EaXYuYXBwZW5kQ2hpbGQobmV3VG9Eb1RpdGxlKTtcbiAgfTtcblxuICBjb25zdCBfZGlzcGxheURlc2NyaXB0aW9uID0gKHRvRG8sIG5ld1RvRG9EaXYpID0+IHtcbiAgICBjb25zdCBuZXdUb0RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG5ld1RvRG9EZXNjcmlwdGlvbi5pbm5lckhUTUwgPSB0b0RvLmRlc2NyaXB0aW9uO1xuICAgIG5ld1RvRG9EZXNjcmlwdGlvbi5jbGFzc05hbWUgPSBcInRvZG8tZGVzY3JpcHRpb25cIjtcbiAgICBuZXdUb0RvRGl2LmFwcGVuZENoaWxkKG5ld1RvRG9EZXNjcmlwdGlvbik7XG4gIH07XG5cbiAgY29uc3QgX2Rpc3BsYXlEdWVEYXRlID0gKHRvRG8sIG5ld1RvRG9EaXYpID0+IHtcbiAgICBjb25zdCBuZXdUb0RvRHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbmV3VG9Eb0R1ZURhdGUuaW5uZXJIVE1MID0gdG9Eby5kdWVEYXRlO1xuICAgIG5ld1RvRG9EdWVEYXRlLmNsYXNzTmFtZSA9IFwidG9kby1kdWVkYXRlXCI7XG4gICAgbmV3VG9Eb0Rpdi5hcHBlbmRDaGlsZChuZXdUb0RvRHVlRGF0ZSk7XG4gIH07XG5cbiAgY29uc3QgX2Rpc3BsYXlQcmlvcml0eSA9ICh0b0RvLCBuZXdUb0RvRGl2KSA9PiB7XG4gICAgY29uc3QgbmV3VG9Eb1ByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBuZXdUb0RvUHJpb3JpdHkuaW5uZXJIVE1MID0gdG9Eby5wcmlvcml0eTtcbiAgICBuZXdUb0RvUHJpb3JpdHkuY2xhc3NOYW1lID0gXCJ0b2RvLXByaW9yaXR5XCI7XG4gICAgbmV3VG9Eb0Rpdi5hcHBlbmRDaGlsZChuZXdUb0RvUHJpb3JpdHkpO1xuICB9O1xuXG4gIC8vIGNvbnN0IGRpc3BsYXl0b0RvID0gKHRvRG8pID0+IHtcbiAgLy8gICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250ZW50XCIpO1xuICAvLyAgIGNvbnN0IG5ld1RvRG9EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gIC8vICAgY29udGVudC5hcHBlbmRDaGlsZChuZXdUb0RvRGl2KTtcblxuICAvLyAgIF9kaXNwbGF5VGl0bGUodG9EbywgbmV3VG9Eb0Rpdik7XG5cbiAgLy8gICBfZGlzcGxheURlc2NyaXB0aW9uKHRvRG8sIG5ld1RvRG9EaXYpO1xuXG4gIC8vICAgX2Rpc3BsYXlEdWVEYXRlKHRvRG8sIG5ld1RvRG9EaXYpO1xuXG4gIC8vICAgX2Rpc3BsYXlQcmlvcml0eSh0b0RvLCBuZXdUb0RvRGl2KTtcbiAgLy8gfTtcblxuICBjb25zdCBhc3NpZ25Qcm9qZWN0SWQgPSBmdW5jdGlvbiAocHJvamVjdElkKSB7XG4gICAgY29uc3QgdG9kb0Zvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy10b2RvLWZvcm1cIik7XG4gICAgY29uc3QgaGlkZGVuUHJvamVjdElkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGhpZGRlblByb2plY3RJZC50eXBlID0gXCJoaWRkZW5cIjtcbiAgICBoaWRkZW5Qcm9qZWN0SWQuaWQgPSBcInByb2plY3RJZFwiO1xuICAgIGhpZGRlblByb2plY3RJZC5uYW1lID0gXCJwcm9qZWN0SWRcIjtcbiAgICBoaWRkZW5Qcm9qZWN0SWQudmFsdWUgPSBwcm9qZWN0SWQ7XG4gICAgdG9kb0Zvcm0uYXBwZW5kQ2hpbGQoaGlkZGVuUHJvamVjdElkKTtcbiAgfTtcblxuICByZXR1cm4geyBuZXdUb0RvRm9ybSwgYXNzaWduUHJvamVjdElkLCBzaG93QWxsVG9kb3MgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IFRvRG9Eb20gfTtcbiIsImltcG9ydCB7IERvbVN0dWZmIH0gZnJvbSBcIi4vZG9tXCI7XG5pbXBvcnQgeyBUb0RvRG9tIH0gZnJvbSBcIi4vdG9Eb0RvbVwiO1xuXG5jb25zdCBWaWV3UHJvamVjdCA9ICgoKSA9PiB7XG4gIGNvbnN0IHZpZXdUaXRsZSA9IGZ1bmN0aW9uIChwcm9qZWN0KSB7XG4gICAgRG9tU3R1ZmYudmlld1Byb2plY3QocHJvamVjdCk7XG4gIH07XG5cbiAgY29uc3Qgdmlld1RvRG9zID0gZnVuY3Rpb24gKHByb2plY3QpIHtcbiAgICBsZXQgYXJyYXkgPSBwcm9qZWN0LnRvRG9BcnJheTtcbiAgICBjb25zb2xlLmxvZyhcInZ0ZCBvdXRlciBjYWxsZWRcIik7XG4gICAgY29uc29sZS5sb2coYXJyYXkpO1xuICAgIGlmIChhcnJheSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIFRvRG9Eb20uc2hvd0FsbFRvZG9zKGFycmF5KTtcbiAgICAgIGNvbnNvbGUubG9nKFwidG9kb2RvbSBjYWxsZWRcIik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7IHZpZXdUaXRsZSwgdmlld1RvRG9zIH07XG59KSgpO1xuXG5leHBvcnQgeyBWaWV3UHJvamVjdCB9O1xuIiwiaW1wb3J0IHsgRG9tU3R1ZmYgfSBmcm9tIFwiLi9kb21cIjtcbmltcG9ydCB7IFZpZXdQcm9qZWN0IH0gZnJvbSBcIi4vdmlld1wiO1xuaW1wb3J0IHsgVG9Eb0RvbSB9IGZyb20gXCIuL3RvRG9Eb21cIjtcbmltcG9ydCB7IFRvRG8gfSBmcm9tIFwiLi90b2RvXCI7XG5cbmNvbnN0IFByb2plY3RNYW5hZ2VyID0gKCgpID0+IHtcbiAgY29uc3QgcHJvamVjdEFycmF5ID0gW107XG4gIGNvbnN0IHByb2plY3RJZCA9IDA7XG4gIGNvbnN0IHRvRG9JZCA9IDA7XG5cbiAgY29uc3Qgc2hvd0FsbFByb2plY3RzID0gKCkgPT4ge1xuICAgIERvbVN0dWZmLmRpc3BsYXlBbGxQcm9qZWN0cyhwcm9qZWN0QXJyYXkpO1xuICAgIFByb2plY3RNYW5hZ2VyLnZpZXdQcm9qZWN0TGlzdGVuZXIoKTtcbiAgfTtcblxuICBjb25zdCB2aWV3UHJvamVjdExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHByb2plY3RBcnJheS5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4gICAgICBjb25zdCB2aWV3QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcbiAgICAgICAgYHZpZXctcHJvamVjdC0ke3Byb2plY3QuaWR9YFxuICAgICAgKVswXTtcbiAgICAgIHZpZXdCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgVmlld1Byb2plY3Qudmlld1RpdGxlKHByb2plY3QpO1xuICAgICAgICBUb0RvRG9tLm5ld1RvRG9Gb3JtKCk7XG4gICAgICAgIFRvRG9Eb20uYXNzaWduUHJvamVjdElkKHByb2plY3QuaWQpO1xuICAgICAgICBjb25zdCB0b2RvID0gVG9EbygpO1xuICAgICAgICB0b2RvLnRvZG9MaXN0ZW5lcigpO1xuICAgICAgICAvLyBUb0RvRG9tLnNob3dBbGxUb2Rvcyhwcm9qZWN0KTtcbiAgICAgICAgcHJvamVjdC5zaG93VG9Eb3MoKTtcbiAgICAgICAgVmlld1Byb2plY3Qudmlld1RvRG9zKHByb2plY3QpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBzaG93QWxsUHJvamVjdHMsXG4gICAgcHJvamVjdEFycmF5LFxuICAgIHByb2plY3RJZCxcbiAgICB0b0RvSWQsXG4gICAgdmlld1Byb2plY3RMaXN0ZW5lcixcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IFByb2plY3RNYW5hZ2VyIH07XG4iLCJpbXBvcnQgeyBQcm9qZWN0TWFuYWdlciB9IGZyb20gXCIuL3Byb2plY3RNYW5hZ2VyXCI7XG5pbXBvcnQgeyBWaWV3UHJvamVjdCB9IGZyb20gXCIuL3ZpZXdcIjtcblxuY29uc3QgVG9EbyA9IGZ1bmN0aW9uICh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5KSB7XG4gIGNvbnN0IHRvRG9TdGF0dXMgPSBcImluY29tcGxldGVcIjtcbiAgbGV0IHRvRG9pZCA9IDA7XG4gIGNvbnN0IHByb2plY3RJZCA9IFwiXCI7XG5cbiAgY29uc3QgY3JlYXRlID0gKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHkpID0+IHtcbiAgICBuZXdUb0RvID0gdG9Ebyh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5KTtcbiAgfTtcblxuICBjb25zdCBjaGFuZ2UgPSAoZWxlbWVudFRvQ2hhbmdlLCBuZXdWYWx1ZSkgPT4ge1xuICAgIHRoaXNbZWxlbWVudFRvQ2hhbmdlXSA9IG5ld1ZhbHVlO1xuICB9O1xuXG4gIGNvbnN0IGNoYW5nZVREUyA9ICgpID0+IHtcbiAgICB0b0Rvc3RhdHVzID0gY29tcGxldGV0O1xuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZVRvZG8gPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgdG9kb1RpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKS52YWx1ZTtcbiAgICBjb25zdCB0b2RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpLnZhbHVlO1xuICAgIGNvbnN0IHRvZG9EdWVEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkdWVEYXRlXCIpLnZhbHVlO1xuICAgIGNvbnN0IHRvZG9Qcmlvcml0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlcIikudmFsdWU7XG4gICAgY29uc3QgdG9kb1Byb2plY3RJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdElkXCIpLnZhbHVlO1xuICAgIGNvbnN0IG5ld1RvZG8gPSBUb0RvKHRvZG9UaXRsZSwgdG9kb0Rlc2NyaXB0aW9uLCB0b2RvRHVlRGF0ZSwgdG9kb1ByaW9yaXR5KTtcbiAgICBuZXdUb2RvLnByb2plY3RJZCA9IHRvZG9Qcm9qZWN0SWQ7XG4gICAgbmV3VG9kby5pZCA9IHRvRG9pZDtcbiAgICBsZXQgcGFyZW50UHJvamVjdCA9IGZpbmRQcm9qZWN0KHRvZG9Qcm9qZWN0SWQpO1xuICAgIHBhcmVudFByb2plY3QudG9Eb0FycmF5LnB1c2gobmV3VG9kbyk7XG4gICAgY29uc29sZS5sb2cocGFyZW50UHJvamVjdCk7XG4gICAgVmlld1Byb2plY3Qudmlld1RvRG9zKHBhcmVudFByb2plY3QpO1xuICB9O1xuXG4gIGNvbnN0IGZpbmRQcm9qZWN0ID0gZnVuY3Rpb24gKHRvZG9Qcm9qZWN0SWQpIHtcbiAgICBsZXQgZm91bmRQcm9qZWN0ID0gXCJcIjtcbiAgICBQcm9qZWN0TWFuYWdlci5wcm9qZWN0QXJyYXkuZm9yRWFjaCgocHJvamVjdCkgPT4ge1xuICAgICAgaWYgKHByb2plY3QuaWQgPT0gdG9kb1Byb2plY3RJZCkge1xuICAgICAgICBmb3VuZFByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBmb3VuZFByb2plY3Q7XG4gIH07XG5cbiAgY29uc3QgdG9kb0xpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXctdG9kby1mb3JtXCIpO1xuICAgIHRvZG9Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY3JlYXRlVG9kbygpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGluY3JlYXNlVG9Eb0lkID0gZnVuY3Rpb24gKCkge1xuICAgIHRvRG9pZCArPSAxO1xuICB9O1xuXG4gIGluY3JlYXNlVG9Eb0lkKCk7XG5cbiAgcmV0dXJuIHtcbiAgICB0aXRsZSxcbiAgICBkZXNjcmlwdGlvbixcbiAgICBkdWVEYXRlLFxuICAgIHByaW9yaXR5LFxuICAgIHRvRG9TdGF0dXMsXG4gICAgY3JlYXRlLFxuICAgIGNoYW5nZSxcbiAgICB0b0RvU3RhdHVzLFxuICAgIHRvRG9pZCxcbiAgICBwcm9qZWN0SWQsXG4gICAgdG9kb0xpc3RlbmVyLFxuICB9O1xufTtcblxuZXhwb3J0IHsgVG9EbyB9O1xuIiwiaW1wb3J0IHsgRG9tU3R1ZmYgfSBmcm9tIFwiLi9kb21cIjtcbmltcG9ydCB7IFByb2plY3RNYW5hZ2VyIH0gZnJvbSBcIi4vcHJvamVjdE1hbmFnZXJcIjtcblxuY29uc3QgUHJvamVjdCA9ICh0aXRsZSkgPT4ge1xuICBjb25zdCB0b0RvQXJyYXkgPSBbXTtcbiAgY29uc3QgaWQgPSBcIlwiO1xuXG4gIGNvbnN0IHNob3dUb0RvcyA9ICgpID0+IHtcbiAgICB0b0RvQXJyYXkuZm9yRWFjaCgodG9EbykgPT4ge1xuICAgICAgRG9tU3R1ZmYuZGlzcGxheXRvRG8odG9Ebyk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlTmV3UHJvamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBuZXdQcm9qZWNUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIikudmFsdWU7XG4gICAgY29uc3QgbmV3UHJvamVjdCA9IFByb2plY3QobmV3UHJvamVjVGl0bGUpO1xuICAgIG5ld1Byb2plY3QuaWQgPSBQcm9qZWN0TWFuYWdlci5wcm9qZWN0SWQ7XG4gICAgUHJvamVjdE1hbmFnZXIucHJvamVjdEFycmF5LnB1c2gobmV3UHJvamVjdCk7XG4gICAgUHJvamVjdE1hbmFnZXIuc2hvd0FsbFByb2plY3RzKCk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlTmV3UHJvamVjdEZvcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgRG9tU3R1ZmYuY3JlYXRlRm9ybSgpO1xuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZUZvcm1MaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBuZXdQcm9qZWN0Rm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3LXByb2plY3QtZm9ybVwiKTtcbiAgICBuZXdQcm9qZWN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNyZWF0ZU5ld1Byb2plY3QoKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBpbmNyZWFzZVByb2plY3RJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBQcm9qZWN0TWFuYWdlci5wcm9qZWN0SWQgKz0gMTtcbiAgfTtcblxuICBpbmNyZWFzZVByb2plY3RJZCgpO1xuXG4gIHJldHVybiB7IHRpdGxlLCB0b0RvQXJyYXksIHNob3dUb0RvcywgY3JlYXRlRm9ybUxpc3RlbmVyLCBpZCB9O1xufTtcblxuZXhwb3J0IHsgUHJvamVjdCB9O1xuIiwiaW1wb3J0IHsgVG9EbyB9IGZyb20gXCIuL3RvZG9cIjsgLy8gdG9kZWxldGVcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0XCI7XG5pbXBvcnQgeyBQcm9qZWN0TWFuYWdlciB9IGZyb20gXCIuL3Byb2plY3RNYW5hZ2VyXCI7XG5pbXBvcnQgeyBEb21TdHVmZiB9IGZyb20gXCIuL2RvbVwiO1xuXG5jb25zdCBwcm9qZWN0ID0gUHJvamVjdChcIkFCQ1wiKTtcbmNvbnN0IHRvRG8gPSBUb0RvKFwiYWJjXCIsIFwiYWJjXCIsIFwiYWJjXCIsIFwiYWJjXCIpO1xuRG9tU3R1ZmYuY3JlYXRlUHJvamVjdHNDb250YWluZXIoKTtcbkRvbVN0dWZmLmNyZWF0ZVByb2plY3RGb3JtKCk7XG5wcm9qZWN0LnRvRG9BcnJheS5wdXNoKHRvRG8pO1xucHJvamVjdC5zaG93VG9Eb3MoKTtcblByb2plY3RNYW5hZ2VyLnNob3dBbGxQcm9qZWN0cygpO1xucHJvamVjdC5jcmVhdGVGb3JtTGlzdGVuZXIoKTtcbiJdLCJuYW1lcyI6WyJEb21TdHVmZiIsInRvRG8iLCJjb250ZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIm5ld1RvRG9EaXYiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJuZXdUb0RvVGl0bGUiLCJpbm5lckhUTUwiLCJ0aXRsZSIsImNsYXNzTmFtZSIsIl9kaXNwbGF5VGl0bGUiLCJuZXdUb0RvRGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsIl9kaXNwbGF5RGVzY3JpcHRpb24iLCJuZXdUb0RvRHVlRGF0ZSIsImR1ZURhdGUiLCJfZGlzcGxheUR1ZURhdGUiLCJuZXdUb0RvUHJpb3JpdHkiLCJwcmlvcml0eSIsIl9kaXNwbGF5UHJpb3JpdHkiLCJwcm9qZWN0QXJyYXkiLCJwcm9qZWN0c0NvbnRhaW5lciIsImNvbnNvbGUiLCJsb2ciLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJsYXN0Q2hpbGQiLCJfcmVtb3ZlQWxsUHJvamVjdHMiLCJjcmVhdGVQcm9qZWN0c0RpdiIsImlkIiwiX2NyZWF0ZVByb2plY3RDb250YWluZXIiLCJmb3JFYWNoIiwicHJvamVjdCIsImlubmVyUHJvamVjdHNDb250YWluZXIiLCJuZXdQcm9qZWN0Q29udGFpbmVyIiwicHJvamVjdFRpdGxlIiwiaW5uZXJUZXh0Iiwidmlld1Byb2plY3QiLCJ0ZXh0Q29udGVudCIsIl9kaXNwbGF5SW5kaXZpZHVhbFByb2plY3QiLCJfcmVtb3ZlQWxsQ29udGVudCIsInZpZXdQcm9qZWN0Q29udGFpbmVyIiwibmV3UHJvamVjdEZvcm1Db250YWluZXIiLCJwcm9qZWN0Rm9ybSIsInR5cGUiLCJuYW1lIiwicHJvamVjdFRpdGxlTGFiZWwiLCJodG1sRm9yIiwic3VibWl0IiwiVG9Eb0RvbSIsIm5ld1RvRG9Gb3JtIiwiY29udGFpbmVyIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsIm5ld1RvZG9Gb3JtQ29udGFpbmVyIiwidG9kb0Zvcm0iLCJ0b2RvVGl0bGVMYWJlbCIsInRvZG9UaXRsZSIsInRvZG9EZXNjcmlwdGlvbkxhYmVsIiwidG9kb0Rlc2NyaXB0aW9uIiwidG9kb0R1ZURhdGVMYWJlbCIsInRvZG9EdWVEYXRlIiwidG9kb1ByaW9yaXR5TGFiZWwiLCJ0b2RvUHJpb3JpdHkiLCJhc3NpZ25Qcm9qZWN0SWQiLCJwcm9qZWN0SWQiLCJoaWRkZW5Qcm9qZWN0SWQiLCJ2YWx1ZSIsInNob3dBbGxUb2RvcyIsInRvZG9BcnJheSIsInRvZG9Db250YWluZXIiLCJfZGVsZXRlVG9kb0NvbnRhaW5lciIsIl9jcmVhdGVUb2RvQ29udGFpbmVyIiwidG9kbyIsIl9zaG93VG9kb3MiLCJWaWV3UHJvamVjdCIsImFycmF5IiwidG9Eb0FycmF5IiwidW5kZWZpbmVkIiwiUHJvamVjdE1hbmFnZXIiLCJzaG93QWxsUHJvamVjdHMiLCJ2aWV3UHJvamVjdExpc3RlbmVyIiwidG9Eb0lkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlRvRG8iLCJ0b2RvTGlzdGVuZXIiLCJzaG93VG9Eb3MiLCJ0b0RvU3RhdHVzIiwidG9Eb2lkIiwiY3JlYXRlIiwibmV3VG9EbyIsImNoYW5nZSIsImVsZW1lbnRUb0NoYW5nZSIsIm5ld1ZhbHVlIiwidGhpcyIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ0b2RvUHJvamVjdElkIiwibmV3VG9kbyIsInBhcmVudFByb2plY3QiLCJmb3VuZFByb2plY3QiLCJmaW5kUHJvamVjdCIsInB1c2giLCJjcmVhdGVUb2RvIiwiUHJvamVjdCIsImNyZWF0ZUZvcm1MaXN0ZW5lciIsIm5ld1Byb2plY1RpdGxlIiwibmV3UHJvamVjdCIsImNyZWF0ZU5ld1Byb2plY3QiXSwic291cmNlUm9vdCI6IiJ9