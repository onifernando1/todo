(()=>{"use strict";const e={displayAllProjects:e=>{document.createElement("div"),(()=>{const e=document.getElementById("projects-container");if(null!=e)for(;e.firstChild;)e.removeChild(e.lastChild)})(),(()=>{const e=document.getElementById("projects-container"),t=document.createElement("div");t.id="inner-projects-container",e.appendChild(t)})(),(e=>{e.forEach((e=>{const t=document.getElementById("inner-projects-container"),n=document.createElement("div");n.className="individual-project-container";const o=document.createElement("div");o.className="project-title",o.innerText=e.title;const c=document.createElement("button");c.className=`view-project-${e.id}`,c.textContent="View project",n.appendChild(c),n.appendChild(o),t.appendChild(n)}))})(e)},viewProject:function(e){!function(){const e=document.getElementById("content");for(;e.firstChild;)e.removeChild(e.lastChild)}();const t=document.createElement("div");t.className="view-project-container",content.appendChild(t);const n=document.createElement("div");n.className="view-project-title",n.innerText=e.title,t.appendChild(n)},createProjectsContainer:function(){const e=document.getElementById("content"),t=document.createElement("div");t.id="projects-container",e.appendChild(t)},createProjectForm:function(){const e=document.getElementById("content"),t=document.createElement("div");t.className="new-project-form-container",e.appendChild(t);const n=document.createElement("form");n.id="new-project-form";const o=document.createElement("input");o.type="text",o.id="title",o.name="title";const c=document.createElement("label");c.htmlFor="title",c.innerText="New Project Title";const d=document.createElement("input");d.type="submit",d.id="submit",d.name="submit",n.appendChild(c),n.appendChild(o),n.appendChild(d),t.appendChild(n)}},t=(()=>{const e=(e,t)=>{const n=document.createElement("div");n.innerHTML=e.title,n.className="todo-title",t.appendChild(n)},t=(e,t)=>{const n=document.createElement("div");n.innerHTML=e.description,n.className="todo-description",t.appendChild(n)},n=(e,t)=>{const n=document.createElement("div");n.innerHTML=e.dueDate,n.className="todo-duedate",t.appendChild(n)},o=(e,t)=>{const n=document.createElement("div");n.innerHTML=e.priority,n.className="todo-priority",t.appendChild(n)};return{newToDoForm:function(){const e=document.getElementsByClassName("view-project-container")[0],t=document.createElement("div");t.className="new-todo-form-container",e.appendChild(t);const n=document.createElement("form");n.id="new-todo-form";const o=document.createElement("label");o.htmlFor="title",o.innerText="Title";const c=document.createElement("input");c.type="text",c.id="title",c.name="title";const d=document.createElement("label");d.htmlFor="description",d.innerText="Description";const i=document.createElement("input");i.type="text",i.id="description",i.name="description";const r=document.createElement("label");r.htmlFor="dueDate",r.innerText="Due Date";const l=document.createElement("input");l.type="text",l.id="dueDate",l.name="dueDate";const a=document.createElement("label");a.htmlFor="priority",a.innerText="Priority";const m=document.createElement("input");m.type="text",m.id="priority",m.name="priority";const s=document.createElement("input");s.type="submit",s.id="submit",s.name="submit",n.appendChild(o),n.appendChild(c),n.appendChild(d),n.appendChild(i),n.appendChild(r),n.appendChild(l),n.appendChild(a),n.appendChild(m),n.appendChild(s),t.appendChild(n)},assignProjectId:function(e){const t=document.getElementById("new-todo-form"),n=document.createElement("input");n.type="hidden",n.id="projectId",n.name="projectId",n.value=e,t.appendChild(n)},showAllTodos:function(c){!function(){const e=document.getElementsByClassName("todo-container")[0],t=document.getElementById("content");e&&t.removeChild(e)}(),function(){const e=document.getElementById("content"),t=document.createElement("div");t.className="todo-container",e.appendChild(t)}(),function(c){const d=document.getElementsByClassName("todo-container")[0];c.forEach((c=>{e(c,d),t(c,d),n(c,d),o(c,d),function(e){console.log(e),console.log("above");const t=document.getElementsByClassName("todo-container")[0],n=document.createElement("button");n.className=`${e.id} delete`,n.innerHTML="delete",t.appendChild(n)}(c)}))}(c)}}})(),n=function(t){e.viewProject(t)},o=function(e){let n=e.toDoArray;null!=n&&t.showAllTodos(n)},c=(()=>{const o=[];return{showAllProjects:()=>{e.displayAllProjects(o),c.viewProjectListener()},projectArray:o,projectId:0,toDoId:0,viewProjectListener:function(){o.forEach((e=>{document.getElementsByClassName(`view-project-${e.id}`)[0].addEventListener("click",(()=>{n(e),t.newToDoForm(),t.assignProjectId(e.id),d().todoListener(),e.showToDos()}))}))}}})(),d=function(e,t,n,i){const r="incomplete";let l="";const a=function(e,t){let n="";t.toDoArray.forEach((o=>{o.id==e&&(console.log("before length"),console.log(t.toDoArray.length),n=o,t.toDoArray=t.toDoArray.filter((e=>e!==n)),console.log("after length "),console.log(t.toDoArray.length))})),o(t)};return{title:e,description:t,dueDate:n,priority:i,toDoStatus:r,create:(e,t,n,o)=>{newToDo=toDo(e,t,n,o)},change:(e,t)=>{this[e]=t},toDoStatus:r,projectId:"",todoListener:function(){document.getElementById("new-todo-form").addEventListener("submit",(e=>{e.preventDefault(),function(){const e=document.getElementById("title").value,t=document.getElementById("description").value,n=document.getElementById("dueDate").value,i=document.getElementById("priority").value,r=Number(document.getElementById("projectId").value),m=d(e,t,n,i);m.projectId=r,m.id=(c.toDoId+=1,l=c.toDoId,l);let s=function(e){let t="";return c.projectArray.forEach((n=>{n.id==e&&(t=n)})),t}(r);s.toDoArray.push(m),o(s),function(e){const t=document.getElementsByClassName("delete");for(let n=0;n<t.length;n++)t[n].addEventListener("click",(()=>{let o=t[n].className;o=o.split(""),l=o[0],a(l,e)}))}(s),function(e){localStorage.setItem("parentProject",JSON.stringify(e))}(s)}()}))},id:l}},i=t=>{const n=[];return c.projectId+=1,{title:t,toDoArray:n,showToDos:()=>{n.forEach((t=>{e.displaytoDo(t)}))},createFormListener:function(){document.getElementById("new-project-form").addEventListener("submit",(e=>{e.preventDefault(),function(){const e=document.getElementById("title").value,t=i(e);t.id=c.projectId,c.projectArray.push(t),c.showAllProjects()}()}))},id:""}};let r=i("ABC");r=localStorage.getItem("parentProject"),r=JSON.parse(r);const l=i(r.title);l.id=r.id,l.toDoArray=r.toDoArray,console.log(r),null==r&&(r=i("ABC")),c.projectArray.push(l),e.createProjectsContainer(),e.createProjectForm(),c.showAllProjects(),l.createFormListener()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dkIsTUFBTXFCLEVBQWlCN0gsU0FBU0csZUFBZSxTQUFTK0QsTUFDbEQ0RCxFQUFhSixFQUFRRyxHQUMzQkMsRUFBV3JILEdBQUt5RSxFQUFlbEIsVUFDL0JrQixFQUFlbkYsYUFBYStHLEtBQUtnQixHQUNqQzVDLEVBQWVDLGlCQUNqQixDQVVJNEMsRUFBa0IsR0FFdEIsRUFRMER0SCxHQWxDL0MsR0FrQ21ELEVDakNoRSxJQUFJSSxFQUFVNkcsRUFBUSxPQUN0QjdHLEVBQVV1RyxhQUFhWSxRQUFRLGlCQUMvQm5ILEVBQVV5RyxLQUFLVyxNQUFNcEgsR0FDckIsTUFBTWlILEVBQWFKLEVBQVE3RyxFQUFRTSxPQUNuQzJHLEVBQVdySCxHQUFLSSxFQUFRSixHQUN4QnFILEVBQVc5QyxVQUFZbkUsRUFBUW1FLFVBQy9CUCxRQUFRQyxJQUFJN0QsR0FDR29FLE1BQVhwRSxJQUNGQSxFQUFVNkcsRUFBUSxRQUVwQnhDLEVBQWVuRixhQUFhK0csS0FBS2dCLEdBQ2pDakksRUFBUzZCLDBCQUNUN0IsRUFBUzhCLG9CQUNUdUQsRUFBZUMsa0JBQ2YyQyxFQUFXRixvQiIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8vLi9zcmMvZG9tLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvdG9Eb0RvbS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3ZpZXcuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9wcm9qZWN0TWFuYWdlci5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3RvZG8uanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9wcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgRG9tU3R1ZmYgPSAoKCkgPT4ge1xuICBjb25zdCBfZGlzcGxheUluZGl2aWR1YWxQcm9qZWN0ID0gKHByb2plY3RBcnJheSkgPT4ge1xuICAgIHByb2plY3RBcnJheS5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4gICAgICBjb25zdCBpbm5lclByb2plY3RzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICAgIFwiaW5uZXItcHJvamVjdHMtY29udGFpbmVyXCJcbiAgICAgICk7XG4gICAgICBjb25zdCBuZXdQcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIG5ld1Byb2plY3RDb250YWluZXIuY2xhc3NOYW1lID0gXCJpbmRpdmlkdWFsLXByb2plY3QtY29udGFpbmVyXCI7XG4gICAgICBjb25zdCBwcm9qZWN0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgcHJvamVjdFRpdGxlLmNsYXNzTmFtZSA9IFwicHJvamVjdC10aXRsZVwiO1xuICAgICAgcHJvamVjdFRpdGxlLmlubmVyVGV4dCA9IHByb2plY3QudGl0bGU7XG5cbiAgICAgIC8vIGFkZCB2aWV3IHByb2plY3QgYnV0dG9uXG4gICAgICBjb25zdCB2aWV3UHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICB2aWV3UHJvamVjdC5jbGFzc05hbWUgPSBgdmlldy1wcm9qZWN0LSR7cHJvamVjdC5pZH1gO1xuICAgICAgdmlld1Byb2plY3QudGV4dENvbnRlbnQgPSBcIlZpZXcgcHJvamVjdFwiO1xuICAgICAgbmV3UHJvamVjdENvbnRhaW5lci5hcHBlbmRDaGlsZCh2aWV3UHJvamVjdCk7XG4gICAgICBuZXdQcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3RUaXRsZSk7XG4gICAgICBpbm5lclByb2plY3RzQ29udGFpbmVyLmFwcGVuZENoaWxkKG5ld1Byb2plY3RDb250YWluZXIpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IF9yZW1vdmVBbGxQcm9qZWN0cyA9ICgpID0+IHtcbiAgICBjb25zdCBwcm9qZWN0c0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdHMtY29udGFpbmVyXCIpO1xuICAgIGlmIChwcm9qZWN0c0NvbnRhaW5lciAhPSBudWxsKSB7XG4gICAgICB3aGlsZSAocHJvamVjdHNDb250YWluZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICBwcm9qZWN0c0NvbnRhaW5lci5yZW1vdmVDaGlsZChwcm9qZWN0c0NvbnRhaW5lci5sYXN0Q2hpbGQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdCBfY3JlYXRlUHJvamVjdENvbnRhaW5lciA9ICgpID0+IHtcbiAgICAvLyBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250ZW50XCIpO1xuICAgIGNvbnN0IHByb2plY3RzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0cy1jb250YWluZXJcIik7XG4gICAgY29uc3QgY3JlYXRlUHJvamVjdHNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNyZWF0ZVByb2plY3RzRGl2LmlkID0gXCJpbm5lci1wcm9qZWN0cy1jb250YWluZXJcIjtcbiAgICBwcm9qZWN0c0NvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVQcm9qZWN0c0Rpdik7XG4gICAgLy8gY29udGVudC5hcHBlbmRDaGlsZChwcm9qZWN0c0NvbnRhaW5lcik7XG4gIH07XG5cbiAgY29uc3QgX3JlbW92ZUFsbENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGVudFwiKTtcbiAgICB3aGlsZSAoY29udGVudC5maXJzdENoaWxkKSB7XG4gICAgICBjb250ZW50LnJlbW92ZUNoaWxkKGNvbnRlbnQubGFzdENoaWxkKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlUHJvamVjdHNDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGVudFwiKTtcbiAgICBjb25zdCBwcm9qZWN0c0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgcHJvamVjdHNDb250YWluZXIuaWQgPSBcInByb2plY3RzLWNvbnRhaW5lclwiO1xuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQocHJvamVjdHNDb250YWluZXIpO1xuICB9O1xuXG4gIGNvbnN0IGRpc3BsYXlBbGxQcm9qZWN0cyA9IChwcm9qZWN0QXJyYXkpID0+IHtcbiAgICBjb25zdCBwcm9qZWN0c0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgX3JlbW92ZUFsbFByb2plY3RzKCk7XG4gICAgX2NyZWF0ZVByb2plY3RDb250YWluZXIoKTtcbiAgICBfZGlzcGxheUluZGl2aWR1YWxQcm9qZWN0KHByb2plY3RBcnJheSk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlUHJvamVjdEZvcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgLy9jcmVhdGUgZm9ybSAgY29udGFpbmVyXG4gICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGVudFwiKTtcbiAgICBjb25zdCBuZXdQcm9qZWN0Rm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbmV3UHJvamVjdEZvcm1Db250YWluZXIuY2xhc3NOYW1lID0gXCJuZXctcHJvamVjdC1mb3JtLWNvbnRhaW5lclwiO1xuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQobmV3UHJvamVjdEZvcm1Db250YWluZXIpO1xuXG4gICAgLy9jcmVhdGUgZm9ybSBhbmQgaWRcbiAgICBjb25zdCBwcm9qZWN0Rm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpO1xuICAgIHByb2plY3RGb3JtLmlkID0gXCJuZXctcHJvamVjdC1mb3JtXCI7XG4gICAgY29uc3QgcHJvamVjdFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIHByb2plY3RUaXRsZS50eXBlID0gXCJ0ZXh0XCI7XG4gICAgcHJvamVjdFRpdGxlLmlkID0gXCJ0aXRsZVwiO1xuICAgIHByb2plY3RUaXRsZS5uYW1lID0gXCJ0aXRsZVwiO1xuXG4gICAgY29uc3QgcHJvamVjdFRpdGxlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgcHJvamVjdFRpdGxlTGFiZWwuaHRtbEZvciA9IFwidGl0bGVcIjtcbiAgICBwcm9qZWN0VGl0bGVMYWJlbC5pbm5lclRleHQgPSBcIk5ldyBQcm9qZWN0IFRpdGxlXCI7XG5cbiAgICBjb25zdCBzdWJtaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgc3VibWl0LnR5cGUgPSBcInN1Ym1pdFwiO1xuICAgIHN1Ym1pdC5pZCA9IFwic3VibWl0XCI7XG4gICAgc3VibWl0Lm5hbWUgPSBcInN1Ym1pdFwiO1xuICAgIC8vIHN1Ym1pdC5pbm5lclRleHQgPSBcIkNyZWF0ZSBQcm9qZWN0XCI7XG5cbiAgICBwcm9qZWN0Rm9ybS5hcHBlbmRDaGlsZChwcm9qZWN0VGl0bGVMYWJlbCk7XG4gICAgcHJvamVjdEZvcm0uYXBwZW5kQ2hpbGQocHJvamVjdFRpdGxlKTtcbiAgICBwcm9qZWN0Rm9ybS5hcHBlbmRDaGlsZChzdWJtaXQpO1xuXG4gICAgbmV3UHJvamVjdEZvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdEZvcm0pO1xuICB9O1xuXG4gIGNvbnN0IHZpZXdQcm9qZWN0ID0gZnVuY3Rpb24gKHByb2plY3QpIHtcbiAgICBfcmVtb3ZlQWxsQ29udGVudCgpO1xuXG4gICAgLy8gZ2VuZXJhdGUgdmlld3Byb2plY3Rjb250YWluZXJcbiAgICBjb25zdCB2aWV3UHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdmlld1Byb2plY3RDb250YWluZXIuY2xhc3NOYW1lID0gXCJ2aWV3LXByb2plY3QtY29udGFpbmVyXCI7XG4gICAgY29udGVudC5hcHBlbmRDaGlsZCh2aWV3UHJvamVjdENvbnRhaW5lcik7XG5cbiAgICAvLyBhZGQgcHJvamVjdCB0aXRsZVxuXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRpdGxlLmNsYXNzTmFtZSA9IFwidmlldy1wcm9qZWN0LXRpdGxlXCI7XG4gICAgdGl0bGUuaW5uZXJUZXh0ID0gcHJvamVjdC50aXRsZTtcbiAgICB2aWV3UHJvamVjdENvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICAvLyBkaXNwbGF5dG9EbyxcbiAgICBkaXNwbGF5QWxsUHJvamVjdHMsXG4gICAgdmlld1Byb2plY3QsXG4gICAgY3JlYXRlUHJvamVjdHNDb250YWluZXIsXG4gICAgY3JlYXRlUHJvamVjdEZvcm0sXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyBEb21TdHVmZiB9O1xuIiwiY29uc3QgVG9Eb0RvbSA9ICgoKSA9PiB7XG4gIGNvbnN0IG5ld1RvRG9Gb3JtID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXG4gICAgICBcInZpZXctcHJvamVjdC1jb250YWluZXJcIlxuICAgIClbMF07XG5cbiAgICBjb25zdCBuZXdUb2RvRm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbmV3VG9kb0Zvcm1Db250YWluZXIuY2xhc3NOYW1lID0gXCJuZXctdG9kby1mb3JtLWNvbnRhaW5lclwiO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChuZXdUb2RvRm9ybUNvbnRhaW5lcik7XG5cbiAgICAvLyAvL2NyZWF0ZSBmb3JtIGFuZCBpZFxuXG4gICAgY29uc3QgdG9kb0Zvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKTtcbiAgICB0b2RvRm9ybS5pZCA9IFwibmV3LXRvZG8tZm9ybVwiO1xuXG4gICAgY29uc3QgdG9kb1RpdGxlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgdG9kb1RpdGxlTGFiZWwuaHRtbEZvciA9IFwidGl0bGVcIjtcbiAgICB0b2RvVGl0bGVMYWJlbC5pbm5lclRleHQgPSBcIlRpdGxlXCI7XG5cbiAgICBjb25zdCB0b2RvVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgdG9kb1RpdGxlLnR5cGUgPSBcInRleHRcIjtcbiAgICB0b2RvVGl0bGUuaWQgPSBcInRpdGxlXCI7XG4gICAgdG9kb1RpdGxlLm5hbWUgPSBcInRpdGxlXCI7XG5cbiAgICBjb25zdCB0b2RvRGVzY3JpcHRpb25MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICB0b2RvRGVzY3JpcHRpb25MYWJlbC5odG1sRm9yID0gXCJkZXNjcmlwdGlvblwiO1xuICAgIHRvZG9EZXNjcmlwdGlvbkxhYmVsLmlubmVyVGV4dCA9IFwiRGVzY3JpcHRpb25cIjtcblxuICAgIGNvbnN0IHRvZG9EZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICB0b2RvRGVzY3JpcHRpb24udHlwZSA9IFwidGV4dFwiO1xuICAgIHRvZG9EZXNjcmlwdGlvbi5pZCA9IFwiZGVzY3JpcHRpb25cIjtcbiAgICB0b2RvRGVzY3JpcHRpb24ubmFtZSA9IFwiZGVzY3JpcHRpb25cIjtcblxuICAgIGNvbnN0IHRvZG9EdWVEYXRlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgdG9kb0R1ZURhdGVMYWJlbC5odG1sRm9yID0gXCJkdWVEYXRlXCI7XG4gICAgdG9kb0R1ZURhdGVMYWJlbC5pbm5lclRleHQgPSBcIkR1ZSBEYXRlXCI7XG5cbiAgICBjb25zdCB0b2RvRHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICB0b2RvRHVlRGF0ZS50eXBlID0gXCJ0ZXh0XCI7XG4gICAgdG9kb0R1ZURhdGUuaWQgPSBcImR1ZURhdGVcIjtcbiAgICB0b2RvRHVlRGF0ZS5uYW1lID0gXCJkdWVEYXRlXCI7XG5cbiAgICBjb25zdCB0b2RvUHJpb3JpdHlMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICB0b2RvUHJpb3JpdHlMYWJlbC5odG1sRm9yID0gXCJwcmlvcml0eVwiO1xuICAgIHRvZG9Qcmlvcml0eUxhYmVsLmlubmVyVGV4dCA9IFwiUHJpb3JpdHlcIjtcblxuICAgIGNvbnN0IHRvZG9Qcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICB0b2RvUHJpb3JpdHkudHlwZSA9IFwidGV4dFwiO1xuICAgIHRvZG9Qcmlvcml0eS5pZCA9IFwicHJpb3JpdHlcIjtcbiAgICB0b2RvUHJpb3JpdHkubmFtZSA9IFwicHJpb3JpdHlcIjtcblxuICAgIGNvbnN0IHN1Ym1pdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBzdWJtaXQudHlwZSA9IFwic3VibWl0XCI7XG4gICAgc3VibWl0LmlkID0gXCJzdWJtaXRcIjtcbiAgICBzdWJtaXQubmFtZSA9IFwic3VibWl0XCI7XG5cbiAgICB0b2RvRm9ybS5hcHBlbmRDaGlsZCh0b2RvVGl0bGVMYWJlbCk7XG4gICAgdG9kb0Zvcm0uYXBwZW5kQ2hpbGQodG9kb1RpdGxlKTtcblxuICAgIHRvZG9Gb3JtLmFwcGVuZENoaWxkKHRvZG9EZXNjcmlwdGlvbkxhYmVsKTtcbiAgICB0b2RvRm9ybS5hcHBlbmRDaGlsZCh0b2RvRGVzY3JpcHRpb24pO1xuXG4gICAgdG9kb0Zvcm0uYXBwZW5kQ2hpbGQodG9kb0R1ZURhdGVMYWJlbCk7XG4gICAgdG9kb0Zvcm0uYXBwZW5kQ2hpbGQodG9kb0R1ZURhdGUpO1xuXG4gICAgdG9kb0Zvcm0uYXBwZW5kQ2hpbGQodG9kb1ByaW9yaXR5TGFiZWwpO1xuICAgIHRvZG9Gb3JtLmFwcGVuZENoaWxkKHRvZG9Qcmlvcml0eSk7XG5cbiAgICB0b2RvRm9ybS5hcHBlbmRDaGlsZChzdWJtaXQpO1xuXG4gICAgbmV3VG9kb0Zvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQodG9kb0Zvcm0pO1xuICB9O1xuXG4gIGNvbnN0IF9jcmVhdGVUb2RvQ29udGFpbmVyID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRlbnRcIik7XG4gICAgY29uc3QgdG9kb0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdG9kb0NvbnRhaW5lci5jbGFzc05hbWUgPSBcInRvZG8tY29udGFpbmVyXCI7XG4gICAgY29udGVudC5hcHBlbmRDaGlsZCh0b2RvQ29udGFpbmVyKTtcbiAgfTtcblxuICBjb25zdCBfZGVsZXRlVG9kb0NvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInRvZG8tY29udGFpbmVyXCIpWzBdO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRlbnRcIik7XG4gICAgaWYgKHRvZG9Db250YWluZXIpIHtcbiAgICAgIGNvbnRlbnQucmVtb3ZlQ2hpbGQodG9kb0NvbnRhaW5lcik7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IF9kZWxldGVUb0RvQnV0dG9uID0gZnVuY3Rpb24gKHRvZG8pIHtcbiAgICBjb25zb2xlLmxvZyh0b2RvKTtcbiAgICBjb25zb2xlLmxvZyhcImFib3ZlXCIpO1xuICAgIGNvbnN0IHRvZG9Db250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidG9kby1jb250YWluZXJcIilbMF07XG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBkZWxldGVCdXR0b24uY2xhc3NOYW1lID0gYCR7dG9kby5pZH0gZGVsZXRlYDtcbiAgICBkZWxldGVCdXR0b24uaW5uZXJIVE1MID0gXCJkZWxldGVcIjtcbiAgICB0b2RvQ29udGFpbmVyLmFwcGVuZENoaWxkKGRlbGV0ZUJ1dHRvbik7XG4gIH07XG5cbiAgY29uc3QgX3Nob3dUb2RvcyA9IGZ1bmN0aW9uICh0b2RvQXJyYXkpIHtcbiAgICBjb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInRvZG8tY29udGFpbmVyXCIpWzBdO1xuXG4gICAgdG9kb0FycmF5LmZvckVhY2goKHRvZG8pID0+IHtcbiAgICAgIF9kaXNwbGF5VGl0bGUodG9kbywgdG9kb0NvbnRhaW5lcik7XG5cbiAgICAgIF9kaXNwbGF5RGVzY3JpcHRpb24odG9kbywgdG9kb0NvbnRhaW5lcik7XG5cbiAgICAgIF9kaXNwbGF5RHVlRGF0ZSh0b2RvLCB0b2RvQ29udGFpbmVyKTtcblxuICAgICAgX2Rpc3BsYXlQcmlvcml0eSh0b2RvLCB0b2RvQ29udGFpbmVyKTtcblxuICAgICAgX2RlbGV0ZVRvRG9CdXR0b24odG9kbyk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3Qgc2hvd0FsbFRvZG9zID0gZnVuY3Rpb24gKHRvZG9BcnJheSkge1xuICAgIF9kZWxldGVUb2RvQ29udGFpbmVyKCk7XG4gICAgX2NyZWF0ZVRvZG9Db250YWluZXIoKTtcbiAgICBfc2hvd1RvZG9zKHRvZG9BcnJheSk7XG4gIH07XG5cbiAgY29uc3QgX2Rpc3BsYXlUaXRsZSA9ICh0b0RvLCBuZXdUb0RvRGl2KSA9PiB7XG4gICAgY29uc3QgbmV3VG9Eb1RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBuZXdUb0RvVGl0bGUuaW5uZXJIVE1MID0gdG9Eby50aXRsZTtcbiAgICBuZXdUb0RvVGl0bGUuY2xhc3NOYW1lID0gXCJ0b2RvLXRpdGxlXCI7XG4gICAgbmV3VG9Eb0Rpdi5hcHBlbmRDaGlsZChuZXdUb0RvVGl0bGUpO1xuICB9O1xuXG4gIGNvbnN0IF9kaXNwbGF5RGVzY3JpcHRpb24gPSAodG9EbywgbmV3VG9Eb0RpdikgPT4ge1xuICAgIGNvbnN0IG5ld1RvRG9EZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbmV3VG9Eb0Rlc2NyaXB0aW9uLmlubmVySFRNTCA9IHRvRG8uZGVzY3JpcHRpb247XG4gICAgbmV3VG9Eb0Rlc2NyaXB0aW9uLmNsYXNzTmFtZSA9IFwidG9kby1kZXNjcmlwdGlvblwiO1xuICAgIG5ld1RvRG9EaXYuYXBwZW5kQ2hpbGQobmV3VG9Eb0Rlc2NyaXB0aW9uKTtcbiAgfTtcblxuICBjb25zdCBfZGlzcGxheUR1ZURhdGUgPSAodG9EbywgbmV3VG9Eb0RpdikgPT4ge1xuICAgIGNvbnN0IG5ld1RvRG9EdWVEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBuZXdUb0RvRHVlRGF0ZS5pbm5lckhUTUwgPSB0b0RvLmR1ZURhdGU7XG4gICAgbmV3VG9Eb0R1ZURhdGUuY2xhc3NOYW1lID0gXCJ0b2RvLWR1ZWRhdGVcIjtcbiAgICBuZXdUb0RvRGl2LmFwcGVuZENoaWxkKG5ld1RvRG9EdWVEYXRlKTtcbiAgfTtcblxuICBjb25zdCBfZGlzcGxheVByaW9yaXR5ID0gKHRvRG8sIG5ld1RvRG9EaXYpID0+IHtcbiAgICBjb25zdCBuZXdUb0RvUHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG5ld1RvRG9Qcmlvcml0eS5pbm5lckhUTUwgPSB0b0RvLnByaW9yaXR5O1xuICAgIG5ld1RvRG9Qcmlvcml0eS5jbGFzc05hbWUgPSBcInRvZG8tcHJpb3JpdHlcIjtcbiAgICBuZXdUb0RvRGl2LmFwcGVuZENoaWxkKG5ld1RvRG9Qcmlvcml0eSk7XG4gIH07XG5cbiAgLy8gY29uc3QgZGlzcGxheXRvRG8gPSAodG9EbykgPT4ge1xuICAvLyAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRlbnRcIik7XG4gIC8vICAgY29uc3QgbmV3VG9Eb0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgLy8gICBjb250ZW50LmFwcGVuZENoaWxkKG5ld1RvRG9EaXYpO1xuXG4gIC8vICAgX2Rpc3BsYXlUaXRsZSh0b0RvLCBuZXdUb0RvRGl2KTtcblxuICAvLyAgIF9kaXNwbGF5RGVzY3JpcHRpb24odG9EbywgbmV3VG9Eb0Rpdik7XG5cbiAgLy8gICBfZGlzcGxheUR1ZURhdGUodG9EbywgbmV3VG9Eb0Rpdik7XG5cbiAgLy8gICBfZGlzcGxheVByaW9yaXR5KHRvRG8sIG5ld1RvRG9EaXYpO1xuICAvLyB9O1xuXG4gIGNvbnN0IGFzc2lnblByb2plY3RJZCA9IGZ1bmN0aW9uIChwcm9qZWN0SWQpIHtcbiAgICBjb25zdCB0b2RvRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3LXRvZG8tZm9ybVwiKTtcbiAgICBjb25zdCBoaWRkZW5Qcm9qZWN0SWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgaGlkZGVuUHJvamVjdElkLnR5cGUgPSBcImhpZGRlblwiO1xuICAgIGhpZGRlblByb2plY3RJZC5pZCA9IFwicHJvamVjdElkXCI7XG4gICAgaGlkZGVuUHJvamVjdElkLm5hbWUgPSBcInByb2plY3RJZFwiO1xuICAgIGhpZGRlblByb2plY3RJZC52YWx1ZSA9IHByb2plY3RJZDtcbiAgICB0b2RvRm9ybS5hcHBlbmRDaGlsZChoaWRkZW5Qcm9qZWN0SWQpO1xuICB9O1xuXG4gIHJldHVybiB7IG5ld1RvRG9Gb3JtLCBhc3NpZ25Qcm9qZWN0SWQsIHNob3dBbGxUb2RvcyB9O1xufSkoKTtcblxuZXhwb3J0IHsgVG9Eb0RvbSB9O1xuIiwiaW1wb3J0IHsgRG9tU3R1ZmYgfSBmcm9tIFwiLi9kb21cIjtcbmltcG9ydCB7IFRvRG9Eb20gfSBmcm9tIFwiLi90b0RvRG9tXCI7XG5cbmNvbnN0IFZpZXdQcm9qZWN0ID0gKCgpID0+IHtcbiAgY29uc3Qgdmlld1RpdGxlID0gZnVuY3Rpb24gKHByb2plY3QpIHtcbiAgICBEb21TdHVmZi52aWV3UHJvamVjdChwcm9qZWN0KTtcbiAgfTtcblxuICBjb25zdCB2aWV3VG9Eb3MgPSBmdW5jdGlvbiAocHJvamVjdCkge1xuICAgIGxldCBhcnJheSA9IHByb2plY3QudG9Eb0FycmF5O1xuICAgIGlmIChhcnJheSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIFRvRG9Eb20uc2hvd0FsbFRvZG9zKGFycmF5KTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHsgdmlld1RpdGxlLCB2aWV3VG9Eb3MgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IFZpZXdQcm9qZWN0IH07XG4iLCJpbXBvcnQgeyBEb21TdHVmZiB9IGZyb20gXCIuL2RvbVwiO1xuaW1wb3J0IHsgVmlld1Byb2plY3QgfSBmcm9tIFwiLi92aWV3XCI7XG5pbXBvcnQgeyBUb0RvRG9tIH0gZnJvbSBcIi4vdG9Eb0RvbVwiO1xuaW1wb3J0IHsgVG9EbyB9IGZyb20gXCIuL3RvZG9cIjtcblxuY29uc3QgUHJvamVjdE1hbmFnZXIgPSAoKCkgPT4ge1xuICBjb25zdCBwcm9qZWN0QXJyYXkgPSBbXTtcbiAgY29uc3QgcHJvamVjdElkID0gMDtcbiAgY29uc3QgdG9Eb0lkID0gMDtcblxuICBjb25zdCBzaG93QWxsUHJvamVjdHMgPSAoKSA9PiB7XG4gICAgRG9tU3R1ZmYuZGlzcGxheUFsbFByb2plY3RzKHByb2plY3RBcnJheSk7XG4gICAgUHJvamVjdE1hbmFnZXIudmlld1Byb2plY3RMaXN0ZW5lcigpO1xuICB9O1xuXG4gIGNvbnN0IHZpZXdQcm9qZWN0TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgcHJvamVjdEFycmF5LmZvckVhY2goKHByb2plY3QpID0+IHtcbiAgICAgIGNvbnN0IHZpZXdCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxuICAgICAgICBgdmlldy1wcm9qZWN0LSR7cHJvamVjdC5pZH1gXG4gICAgICApWzBdO1xuICAgICAgdmlld0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBWaWV3UHJvamVjdC52aWV3VGl0bGUocHJvamVjdCk7XG4gICAgICAgIFRvRG9Eb20ubmV3VG9Eb0Zvcm0oKTtcbiAgICAgICAgVG9Eb0RvbS5hc3NpZ25Qcm9qZWN0SWQocHJvamVjdC5pZCk7XG4gICAgICAgIGNvbnN0IHRvZG8gPSBUb0RvKCk7XG4gICAgICAgIHRvZG8udG9kb0xpc3RlbmVyKCk7XG4gICAgICAgIC8vIFRvRG9Eb20uc2hvd0FsbFRvZG9zKHByb2plY3QpO1xuICAgICAgICBwcm9qZWN0LnNob3dUb0RvcygpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBzaG93QWxsUHJvamVjdHMsXG4gICAgcHJvamVjdEFycmF5LFxuICAgIHByb2plY3RJZCxcbiAgICB0b0RvSWQsXG4gICAgdmlld1Byb2plY3RMaXN0ZW5lcixcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IFByb2plY3RNYW5hZ2VyIH07XG4iLCJpbXBvcnQgeyBQcm9qZWN0TWFuYWdlciB9IGZyb20gXCIuL3Byb2plY3RNYW5hZ2VyXCI7XG5pbXBvcnQgeyBWaWV3UHJvamVjdCB9IGZyb20gXCIuL3ZpZXdcIjtcblxuY29uc3QgVG9EbyA9IGZ1bmN0aW9uICh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5KSB7XG4gIGNvbnN0IHRvRG9TdGF0dXMgPSBcImluY29tcGxldGVcIjtcbiAgY29uc3QgcHJvamVjdElkID0gXCJcIjtcbiAgbGV0IGlkID0gXCJcIjtcblxuICBjb25zdCBjcmVhdGUgPSAodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSkgPT4ge1xuICAgIG5ld1RvRG8gPSB0b0RvKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHkpO1xuICB9O1xuXG4gIGNvbnN0IGNoYW5nZSA9IChlbGVtZW50VG9DaGFuZ2UsIG5ld1ZhbHVlKSA9PiB7XG4gICAgdGhpc1tlbGVtZW50VG9DaGFuZ2VdID0gbmV3VmFsdWU7XG4gIH07XG5cbiAgY29uc3QgY2hhbmdlVERTID0gKCkgPT4ge1xuICAgIHRvRG9zdGF0dXMgPSBjb21wbGV0ZTtcbiAgfTtcblxuICBjb25zdCBjcmVhdGVUb2RvID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHRvZG9UaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIikudmFsdWU7XG4gICAgY29uc3QgdG9kb0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvblwiKS52YWx1ZTtcbiAgICBjb25zdCB0b2RvRHVlRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHVlRGF0ZVwiKS52YWx1ZTtcbiAgICBjb25zdCB0b2RvUHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5XCIpLnZhbHVlO1xuICAgIGNvbnN0IHRvZG9Qcm9qZWN0SWQgPSBOdW1iZXIoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0SWRcIikudmFsdWUpO1xuICAgIGNvbnN0IG5ld1RvZG8gPSBUb0RvKHRvZG9UaXRsZSwgdG9kb0Rlc2NyaXB0aW9uLCB0b2RvRHVlRGF0ZSwgdG9kb1ByaW9yaXR5KTtcbiAgICBuZXdUb2RvLnByb2plY3RJZCA9IHRvZG9Qcm9qZWN0SWQ7XG4gICAgbmV3VG9kby5pZCA9IGluY3JlYXNlVG9Eb0lkKCk7XG4gICAgLy8gbmV3VG9kby5pZCA9IFByb2plY3RNYW5hZ2VyLnRvRG9pZDtcbiAgICBsZXQgcGFyZW50UHJvamVjdCA9IGZpbmRQcm9qZWN0KHRvZG9Qcm9qZWN0SWQpO1xuICAgIHBhcmVudFByb2plY3QudG9Eb0FycmF5LnB1c2gobmV3VG9kbyk7XG4gICAgVmlld1Byb2plY3Qudmlld1RvRG9zKHBhcmVudFByb2plY3QpO1xuICAgIGRlbGV0ZUJ1dHRvbkxpc3RlbmVyKHBhcmVudFByb2plY3QpO1xuICAgIHBvcHVsYXRlU3RvcmFnZShwYXJlbnRQcm9qZWN0KTtcbiAgfTtcblxuICBjb25zdCBwb3B1bGF0ZVN0b3JhZ2UgPSBmdW5jdGlvbiAocGFyZW50UHJvamVjdCkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicGFyZW50UHJvamVjdFwiLCBKU09OLnN0cmluZ2lmeShwYXJlbnRQcm9qZWN0KSk7XG4gIH07XG5cbiAgY29uc3QgZmluZFByb2plY3QgPSBmdW5jdGlvbiAodG9kb1Byb2plY3RJZCkge1xuICAgIGxldCBmb3VuZFByb2plY3QgPSBcIlwiO1xuICAgIFByb2plY3RNYW5hZ2VyLnByb2plY3RBcnJheS5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4gICAgICBpZiAocHJvamVjdC5pZCA9PSB0b2RvUHJvamVjdElkKSB7XG4gICAgICAgIGZvdW5kUHJvamVjdCA9IHByb2plY3Q7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGZvdW5kUHJvamVjdDtcbiAgfTtcblxuICBjb25zdCBkZWxldGVUb2RvID0gZnVuY3Rpb24gKGlkLCBwYXJlbnRQcm9qZWN0KSB7XG4gICAgbGV0IGN1cnJlbnRUb2RvID0gXCJcIjtcbiAgICBwYXJlbnRQcm9qZWN0LnRvRG9BcnJheS5mb3JFYWNoKCh0b2RvKSA9PiB7XG4gICAgICBpZiAodG9kby5pZCA9PSBpZCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImJlZm9yZSBsZW5ndGhcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKHBhcmVudFByb2plY3QudG9Eb0FycmF5Lmxlbmd0aCk7XG4gICAgICAgIGN1cnJlbnRUb2RvID0gdG9kbztcbiAgICAgICAgcGFyZW50UHJvamVjdC50b0RvQXJyYXkgPSBwYXJlbnRQcm9qZWN0LnRvRG9BcnJheS5maWx0ZXIoXG4gICAgICAgICAgKGl0ZW0pID0+IGl0ZW0gIT09IGN1cnJlbnRUb2RvXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiYWZ0ZXIgbGVuZ3RoIFwiKTtcbiAgICAgICAgY29uc29sZS5sb2cocGFyZW50UHJvamVjdC50b0RvQXJyYXkubGVuZ3RoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBWaWV3UHJvamVjdC52aWV3VG9Eb3MocGFyZW50UHJvamVjdCk7XG4gIH07XG5cbiAgY29uc3QgZGVsZXRlQnV0dG9uTGlzdGVuZXIgPSBmdW5jdGlvbiAocGFyZW50UHJvamVjdCkge1xuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZGVsZXRlXCIpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZWxldGVCdXR0b25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkZWxldGVCdXR0b25zW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGxldCBidXR0b25jbGFzcyA9IGRlbGV0ZUJ1dHRvbnNbaV0uY2xhc3NOYW1lO1xuICAgICAgICBidXR0b25jbGFzcyA9IGJ1dHRvbmNsYXNzLnNwbGl0KFwiXCIpO1xuICAgICAgICBpZCA9IGJ1dHRvbmNsYXNzWzBdO1xuICAgICAgICBkZWxldGVUb2RvKGlkLCBwYXJlbnRQcm9qZWN0KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCB0b2RvTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgdG9kb0Zvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy10b2RvLWZvcm1cIik7XG4gICAgdG9kb0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjcmVhdGVUb2RvKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgaW5jcmVhc2VUb0RvSWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgUHJvamVjdE1hbmFnZXIudG9Eb0lkICs9IDE7XG4gICAgaWQgPSBQcm9qZWN0TWFuYWdlci50b0RvSWQ7XG4gICAgcmV0dXJuIGlkO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgdGl0bGUsXG4gICAgZGVzY3JpcHRpb24sXG4gICAgZHVlRGF0ZSxcbiAgICBwcmlvcml0eSxcbiAgICB0b0RvU3RhdHVzLFxuICAgIGNyZWF0ZSxcbiAgICBjaGFuZ2UsXG4gICAgdG9Eb1N0YXR1cyxcbiAgICBwcm9qZWN0SWQsXG4gICAgdG9kb0xpc3RlbmVyLFxuICAgIGlkLFxuICB9O1xufTtcblxuZXhwb3J0IHsgVG9EbyB9O1xuIiwiaW1wb3J0IHsgRG9tU3R1ZmYgfSBmcm9tIFwiLi9kb21cIjtcbmltcG9ydCB7IFByb2plY3RNYW5hZ2VyIH0gZnJvbSBcIi4vcHJvamVjdE1hbmFnZXJcIjtcblxuY29uc3QgUHJvamVjdCA9ICh0aXRsZSkgPT4ge1xuICBjb25zdCB0b0RvQXJyYXkgPSBbXTtcbiAgY29uc3QgaWQgPSBcIlwiO1xuXG4gIGNvbnN0IHNob3dUb0RvcyA9ICgpID0+IHtcbiAgICB0b0RvQXJyYXkuZm9yRWFjaCgodG9EbykgPT4ge1xuICAgICAgRG9tU3R1ZmYuZGlzcGxheXRvRG8odG9Ebyk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlTmV3UHJvamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBuZXdQcm9qZWNUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIikudmFsdWU7XG4gICAgY29uc3QgbmV3UHJvamVjdCA9IFByb2plY3QobmV3UHJvamVjVGl0bGUpO1xuICAgIG5ld1Byb2plY3QuaWQgPSBQcm9qZWN0TWFuYWdlci5wcm9qZWN0SWQ7XG4gICAgUHJvamVjdE1hbmFnZXIucHJvamVjdEFycmF5LnB1c2gobmV3UHJvamVjdCk7XG4gICAgUHJvamVjdE1hbmFnZXIuc2hvd0FsbFByb2plY3RzKCk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlTmV3UHJvamVjdEZvcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgRG9tU3R1ZmYuY3JlYXRlRm9ybSgpO1xuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZUZvcm1MaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBuZXdQcm9qZWN0Rm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3LXByb2plY3QtZm9ybVwiKTtcbiAgICBuZXdQcm9qZWN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNyZWF0ZU5ld1Byb2plY3QoKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBpbmNyZWFzZVByb2plY3RJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBQcm9qZWN0TWFuYWdlci5wcm9qZWN0SWQgKz0gMTtcbiAgfTtcblxuICBpbmNyZWFzZVByb2plY3RJZCgpO1xuXG4gIHJldHVybiB7IHRpdGxlLCB0b0RvQXJyYXksIHNob3dUb0RvcywgY3JlYXRlRm9ybUxpc3RlbmVyLCBpZCB9O1xufTtcblxuZXhwb3J0IHsgUHJvamVjdCB9O1xuIiwiaW1wb3J0IHsgVG9EbyB9IGZyb20gXCIuL3RvZG9cIjsgLy8gdG9kZWxldGVcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0XCI7XG5pbXBvcnQgeyBQcm9qZWN0TWFuYWdlciB9IGZyb20gXCIuL3Byb2plY3RNYW5hZ2VyXCI7XG5pbXBvcnQgeyBEb21TdHVmZiB9IGZyb20gXCIuL2RvbVwiO1xuaW1wb3J0IHsgc3RvcmFnZUF2YWlsYWJsZSB9IGZyb20gXCIuL2xvY2FsU3RvcmFnZVwiO1xuXG5sZXQgcHJvamVjdCA9IFByb2plY3QoXCJBQkNcIik7XG5wcm9qZWN0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwYXJlbnRQcm9qZWN0XCIpO1xucHJvamVjdCA9IEpTT04ucGFyc2UocHJvamVjdCk7XG5jb25zdCBuZXdQcm9qZWN0ID0gUHJvamVjdChwcm9qZWN0LnRpdGxlKTtcbm5ld1Byb2plY3QuaWQgPSBwcm9qZWN0LmlkO1xubmV3UHJvamVjdC50b0RvQXJyYXkgPSBwcm9qZWN0LnRvRG9BcnJheTtcbmNvbnNvbGUubG9nKHByb2plY3QpO1xuaWYgKHByb2plY3QgPT0gdW5kZWZpbmVkKSB7XG4gIHByb2plY3QgPSBQcm9qZWN0KFwiQUJDXCIpO1xufVxuUHJvamVjdE1hbmFnZXIucHJvamVjdEFycmF5LnB1c2gobmV3UHJvamVjdCk7XG5Eb21TdHVmZi5jcmVhdGVQcm9qZWN0c0NvbnRhaW5lcigpO1xuRG9tU3R1ZmYuY3JlYXRlUHJvamVjdEZvcm0oKTtcblByb2plY3RNYW5hZ2VyLnNob3dBbGxQcm9qZWN0cygpO1xubmV3UHJvamVjdC5jcmVhdGVGb3JtTGlzdGVuZXIoKTtcbiJdLCJuYW1lcyI6WyJEb21TdHVmZiIsImRpc3BsYXlBbGxQcm9qZWN0cyIsInByb2plY3RBcnJheSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInByb2plY3RzQ29udGFpbmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJsYXN0Q2hpbGQiLCJfcmVtb3ZlQWxsUHJvamVjdHMiLCJjcmVhdGVQcm9qZWN0c0RpdiIsImlkIiwiYXBwZW5kQ2hpbGQiLCJfY3JlYXRlUHJvamVjdENvbnRhaW5lciIsImZvckVhY2giLCJwcm9qZWN0IiwiaW5uZXJQcm9qZWN0c0NvbnRhaW5lciIsIm5ld1Byb2plY3RDb250YWluZXIiLCJjbGFzc05hbWUiLCJwcm9qZWN0VGl0bGUiLCJpbm5lclRleHQiLCJ0aXRsZSIsInZpZXdQcm9qZWN0IiwidGV4dENvbnRlbnQiLCJfZGlzcGxheUluZGl2aWR1YWxQcm9qZWN0IiwiY29udGVudCIsIl9yZW1vdmVBbGxDb250ZW50Iiwidmlld1Byb2plY3RDb250YWluZXIiLCJjcmVhdGVQcm9qZWN0c0NvbnRhaW5lciIsImNyZWF0ZVByb2plY3RGb3JtIiwibmV3UHJvamVjdEZvcm1Db250YWluZXIiLCJwcm9qZWN0Rm9ybSIsInR5cGUiLCJuYW1lIiwicHJvamVjdFRpdGxlTGFiZWwiLCJodG1sRm9yIiwic3VibWl0IiwiVG9Eb0RvbSIsIl9kaXNwbGF5VGl0bGUiLCJ0b0RvIiwibmV3VG9Eb0RpdiIsIm5ld1RvRG9UaXRsZSIsImlubmVySFRNTCIsIl9kaXNwbGF5RGVzY3JpcHRpb24iLCJuZXdUb0RvRGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsIl9kaXNwbGF5RHVlRGF0ZSIsIm5ld1RvRG9EdWVEYXRlIiwiZHVlRGF0ZSIsIl9kaXNwbGF5UHJpb3JpdHkiLCJuZXdUb0RvUHJpb3JpdHkiLCJwcmlvcml0eSIsIm5ld1RvRG9Gb3JtIiwiY29udGFpbmVyIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsIm5ld1RvZG9Gb3JtQ29udGFpbmVyIiwidG9kb0Zvcm0iLCJ0b2RvVGl0bGVMYWJlbCIsInRvZG9UaXRsZSIsInRvZG9EZXNjcmlwdGlvbkxhYmVsIiwidG9kb0Rlc2NyaXB0aW9uIiwidG9kb0R1ZURhdGVMYWJlbCIsInRvZG9EdWVEYXRlIiwidG9kb1ByaW9yaXR5TGFiZWwiLCJ0b2RvUHJpb3JpdHkiLCJhc3NpZ25Qcm9qZWN0SWQiLCJwcm9qZWN0SWQiLCJoaWRkZW5Qcm9qZWN0SWQiLCJ2YWx1ZSIsInNob3dBbGxUb2RvcyIsInRvZG9BcnJheSIsInRvZG9Db250YWluZXIiLCJfZGVsZXRlVG9kb0NvbnRhaW5lciIsIl9jcmVhdGVUb2RvQ29udGFpbmVyIiwidG9kbyIsImNvbnNvbGUiLCJsb2ciLCJkZWxldGVCdXR0b24iLCJfZGVsZXRlVG9Eb0J1dHRvbiIsIl9zaG93VG9kb3MiLCJWaWV3UHJvamVjdCIsImFycmF5IiwidG9Eb0FycmF5IiwidW5kZWZpbmVkIiwiUHJvamVjdE1hbmFnZXIiLCJzaG93QWxsUHJvamVjdHMiLCJ2aWV3UHJvamVjdExpc3RlbmVyIiwidG9Eb0lkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlRvRG8iLCJ0b2RvTGlzdGVuZXIiLCJzaG93VG9Eb3MiLCJ0b0RvU3RhdHVzIiwiZGVsZXRlVG9kbyIsInBhcmVudFByb2plY3QiLCJjdXJyZW50VG9kbyIsImxlbmd0aCIsImZpbHRlciIsIml0ZW0iLCJjcmVhdGUiLCJuZXdUb0RvIiwiY2hhbmdlIiwiZWxlbWVudFRvQ2hhbmdlIiwibmV3VmFsdWUiLCJ0aGlzIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInRvZG9Qcm9qZWN0SWQiLCJOdW1iZXIiLCJuZXdUb2RvIiwiZm91bmRQcm9qZWN0IiwiZmluZFByb2plY3QiLCJwdXNoIiwiZGVsZXRlQnV0dG9ucyIsImkiLCJidXR0b25jbGFzcyIsInNwbGl0IiwiZGVsZXRlQnV0dG9uTGlzdGVuZXIiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInBvcHVsYXRlU3RvcmFnZSIsImNyZWF0ZVRvZG8iLCJQcm9qZWN0IiwiZGlzcGxheXRvRG8iLCJjcmVhdGVGb3JtTGlzdGVuZXIiLCJuZXdQcm9qZWNUaXRsZSIsIm5ld1Byb2plY3QiLCJjcmVhdGVOZXdQcm9qZWN0IiwiZ2V0SXRlbSIsInBhcnNlIl0sInNvdXJjZVJvb3QiOiIifQ==